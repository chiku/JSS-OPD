"use strict";var Application={Models:{},Collections:{},collections:{},Router:undefined,Views:{Encounters:{},Patients:{}},Configuration:{Urls:{},Selectors:{}},initialize:function(){var a=new Application.Router();Backbone.history.start();Application.collections.encounters.fetch()}};"use strict";Application.Configuration.Selectors={main:'body div[role="main"]',appointments:"#appointments",encounters:"#encounters-container",patient:"#patient-container",encountersSort:"#encounters-sort",replaceByTimeago:".replace-by-timeago",templates:{encounters:"#template-encounters",encounter:"#template-encounter",patient:"#template-patient"}};"use strict";Application.Configuration.Urls={encounters:"/sampleWSResponses/encounter.json",patients:"/sampleWSResponses/patient.json"};"use strict";Application.Models.Encounter=Backbone.Model.extend({patientName:function(a){return this._retrivePropertyFor("patient")},providerName:function(a){return this._retrivePropertyFor("provider")},_retrivePropertyFor:function(b){var a=this.get(b);return a?a.display:undefined}});"use strict";Application.Models.Patient=Backbone.Model.extend({});"use strict";Application.Collections.Encounters=Backbone.Collection.extend({model:Application.Models.Encounter,url:Application.Configuration.Urls.encounters,parse:function(a){var b=a.results;_(b).each(function(c){c.id=c.uuid});return b},comparator:function(a){return a.patientName()},reorderBy:function(a){if(!this._allowedReorderOn(a)){return this}this.comparator=function(b){return b[a]()};this.sort();return this},_allowedReorderOn:function(a){return _(["patientName","providerName"]).include(a)}});Application.collections.encounters=new Application.Collections.Encounters();"use strict";Application.Router=Backbone.Router.extend({routes:{"":"index",encounters:"index","patients/:id":"show"},initialize:function(){this.encountersView=new Application.Views.Encounters.Index({collection:Application.collections.encounters,encounterShowsContainerSelector:Application.Configuration.Selectors.encounters})},index:function(){this.encountersView.attachContentToCleanContainer()},show:function(a){}});"use strict";jQuery(function(){Application.Views.Encounters.Index=Backbone.View.extend({tagName:"section",className:"encounters",template:jQuery(Application.Configuration.Selectors.templates.encounters).html(),initialize:function(a){this.encounterShowsContainerSelector=a.encounterShowsContainerSelector;this.collection.bind("reset",this.render,this);var b=new Application.Views.Encounters.Sort({collection:this.collection})},render:function(){jQuery(this.el).html(_.template(this.template));this.collection.each(function(a){var b=new Application.Views.Encounters.Show({model:a});jQuery(this.encounterShowsContainerSelector).append(b.render().el)},this);jQuery(Application.Configuration.Selectors.replaceByTimeago).timeago();return this},attachContentToCleanContainer:function(){jQuery(Application.Configuration.Selectors.appointments).empty().append(this.render().el);return this}})});"use strict";jQuery(function(){Application.Views.Encounters.Show=Backbone.View.extend({tagName:"li",className:"encounter",events:{click:"showDetails"},template:jQuery(Application.Configuration.Selectors.templates.encounter).html(),initialize:function(a){this.model.bind("change",this.render,this);this.detailedView=new Application.Views.Patients.Show({model:this.model})},render:function(){var a=_.template(this.template)(this.model.toJSON());jQuery(this.el).html(a);return this},showDetails:function(){this.detailedView.attachContentToCleanContainer()}})});"use strict";jQuery(function(){Application.Views.Patients.Show=Backbone.View.extend({tagName:"ul",className:"patient",template:jQuery(Application.Configuration.Selectors.templates.patient).html(),initialize:function(a){this.model.bind("change",this.attachContentToCleanContainer,this)},render:function(){var a=_.template(this.template)(this.model.toJSON());jQuery(this.el).html(a);return this},attachContentToCleanContainer:function(){jQuery(Application.Configuration.Selectors.patient).empty().append(this.render().el);return this}})});"use strict";Application.Views.Encounters.Sort=Backbone.View.extend({el:function(){return jQuery(Application.Configuration.Selectors.encountersSort)},events:{click:"sortPatients"},sortPatients:function(b){var a=jQuery(b.target).attr("data-sort-by");this.collection.reorderBy(a)}});"use strict";jQuery(function(){var b=Application.Configuration.Selectors,a=jQuery(b.main);jQuery("<section>",{id:b.appointments.replace("#","")}).appendTo(a);jQuery("<section>",{id:b.patient.replace("#","")}).appendTo(a);Application.initialize()});